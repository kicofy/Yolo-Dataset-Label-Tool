:root {
  --bg: #0b0c0f;
  --panel: #151820;
  --panel-2: #0f1218;
  --text: #e6e8ef;
  --muted: #a8b0c2;
  --primary: #5b8cff;
  --accent: #29ccb1;
  --danger: #ff5b6b;
  --border: #272c36;
}
* { box-sizing: border-box; }
html, body { margin: 0; background: var(--bg); color: var(--text); font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Noto Sans, sans-serif; }
.topbar { display: flex; align-items: center; justify-content: space-between; padding: 10px 16px; border-bottom: 1px solid var(--border); background: var(--panel); position: sticky; top: 0; z-index: 10; }
.topbar h1 { font-size: 16px; margin: 0 12px 0 0; }
.topbar .left, .topbar .right { display: flex; align-items: center; gap: 10px; }

button, .upload-btn { background: var(--primary); color: white; border: 0; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-weight: 600; }
button:hover, .upload-btn:hover { filter: brightness(1.05); }
.upload-btn { position: relative; overflow: hidden; }
.upload-btn input { position: absolute; inset: 0; opacity: 0; cursor: pointer; }

.container { display: grid; grid-template-columns: 260px 1fr 300px; gap: 8px; padding: 8px; height: calc(100vh - 60px); }
.sidebar { background: var(--panel); border: 1px solid var(--border); border-radius: 10px; overflow: auto; }
.sidebar.left { padding: 8px; }
.sidebar.right { padding: 8px; }

.main { display: flex; flex-direction: column; gap: 8px; }
.toolbar { display: flex; align-items: center; justify-content: space-between; gap: 8px; background: var(--panel); border: 1px solid var(--border); border-radius: 10px; padding: 8px; }
.labels { display: flex; gap: 8px; align-items: center; }
select, input[type=text] { background: var(--panel-2); border: 1px solid var(--border); color: var(--text); padding: 6px 8px; border-radius: 8px; }

.canvas-wrap { position: relative; background: #000; border: 1px solid var(--border); border-radius: 10px; height: calc(100% - 90px); min-height: 400px; overflow: hidden; display: flex; align-items: center; justify-content: center; }
.canvas-wrap img { position: absolute; display: block; max-width: none; max-height: none; }
.canvas-wrap canvas { position: absolute; inset: 0; }
/* Ensure overlay does not block interactions with the main canvas */
.canvas-wrap #overlay { pointer-events: none; }

.thumb { position: relative; margin-bottom: 8px; border: 1px solid var(--border); border-radius: 8px; overflow: hidden; background: #0b0e14; cursor: pointer; }
.thumb img { width: 100%; display: block; }
.thumb .thumb-canvas { position: absolute; pointer-events: none; }
.thumb.active { outline: 2px solid var(--accent); }

.box-list { display: flex; flex-direction: column; gap: 8px; }
.box-item { display: flex; align-items: center; justify-content: space-between; gap: 8px; background: var(--panel-2); border: 1px solid var(--border); border-radius: 8px; padding: 6px 8px; }
.box-item .meta { font-size: 12px; color: var(--muted); }
.box-item .actions button { background: transparent; color: var(--text); border: 1px solid var(--border); }
.box-item .actions button:hover { background: var(--panel); }

.hint { color: var(--muted); font-size: 12px; }

.toast { position: fixed; bottom: 16px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); color:#fff; padding:8px 12px; border-radius: 8px; z-index: 20; opacity: 0; transition: opacity .2s ease-out; }
.toast.show { opacity: 1; }

@media (max-width: 1100px) {
  .container { grid-template-columns: 220px 1fr 260px; }
}
@media (max-width: 900px) {
  .container { grid-template-columns: 1fr; height: auto; }
  .sidebar.left, .sidebar.right { height: 240px; }
}


